function ComponentsCtrl(){}function ComponentListCtrl(a,b){a.components=b.components}function ComponentCtrl(a,b,c){angular.forEach(c.components,function(c){c.name==b.name&&(a.component=c)})}function UserListCtrl(a,b){a.users=b.users}function UserCtrl(a,b,c){a.user=c.users[b.user]}function GraphCtrl(a){a.nodes=[{label:"node 1"},{label:"node 2"},{label:"node 3"},{label:"node 4"},{label:"node 5"}],a.edges=[{source:a.nodes[0],target:a.nodes[1]},{source:a.nodes[3],target:a.nodes[4]},{source:a.nodes[0],target:a.nodes[2]}]}var app=angular.module("haberdashApp",["ngRoute"]),_modules={modules:[],register:function(a){_modules.modules.push(a),angular.forEach(a.routes,function(a){app.config(["$routeProvider",function(b){b.when(a.path,a)}])})},current:function(a){var b="";return angular.forEach(_modules.modules,function(c){angular.forEach(c.routes,function(d){d.templateUrl==a&&(b=c.name)})}),b}};app.controller("ModuleController",["$scope","$route","$location",function(a,b,c){a.$on("$routeChangeSuccess",function(b,c){c&&c.loadedTemplateUrl||(a.currentModule=null),a.currentModule=_modules.current(c.loadedTemplateUrl)}),a.$route=b,a.$location=c,a.modules=_modules.modules}]),app.config(["$routeProvider","$locationProvider",function(a){a.when("/",{templateUrl:"partials/home.html"}).otherwise({templateUrl:"partials/404.html"})}]),app.config(["$routeProvider",function(a){a.when("/components",{templateUrl:"mods/components.html",controller:ComponentsCtrl})}]),_modules.register({name:"Components",baseRoute:"/components",routes:[{path:"/components",templateUrl:"widgets/components/component-list.html",controller:ComponentListCtrl},{path:"/components/:name",templateUrl:"widgets/components/component.html",controller:ComponentCtrl}]}),app.directive("componentLine",function(){return{restrict:"A",scope:{usageData:"=",width:"="},link:function(a,b){a.$watch("usageData",function(c){b.sparkline(c,{width:a.width})})}}}),_modules.register({name:"Users",baseRoute:"/users",routes:[{path:"/users",templateUrl:"widgets/users/users-list.html",controller:UserListCtrl},{path:"/users/:user",templateUrl:"widgets/users/user.html",controller:UserCtrl}]}),_modules.register({name:"Graph",baseRoute:"/graph",routes:[{path:"/graph",templateUrl:"widgets/graph/graph.html",controller:GraphCtrl}]}),angular.module("haberdashApp").directive("graph",[function(){return{restrict:"A",scope:{nodes:"=",edges:"=",width:"@",height:"@"},templateUrl:"widgets/graph/graph-inc.html",link:function(a,b){function c(){f.attr("d",function(a){var b=a.target.x-a.source.x,c=a.target.y-a.source.y,d=Math.sqrt(b*b+c*c);return"M"+a.source.x+","+a.source.y+"A"+d+","+d+" 0 0,1 "+a.target.x+","+a.target.y}),g.attr("transform",function(a){return"translate("+a.x+","+a.y+")"})}var d=d3.layout.force().nodes(a.nodes).links(a.edges).size([a.width,a.height]).linkDistance(60).charge(-300).on("tick",c).start(),e=d3.select(b[0]).append("svg").attr("width",a.width).attr("height",a.height),f=e.append("svg:g").selectAll("path").data(d.links()).enter().append("svg:path").attr("class","link").attr("marker-end","url(#end)"),g=e.selectAll(".node").data(d.nodes()).enter().append("g").attr("class","node").call(d.drag);g.append("circle").attr("r",5),g.append("text").attr("x",12).attr("dy",".35em").text(function(a){return a.label})}}}]),app.factory("dataComponents",["dataUsers",function(a){var b={};return b.components=[{name:"Query SOMETHING",creator:a.users.aperson,usage:[1,4,8,4,3]},{name:"Query ANOTHER",creator:a.users.aperson,usage:[7,4,2,4,3]},{name:"Query THAT",creator:a.users.aperson,usage:[3,4,8,9,9]},{name:"Query THIS",creator:a.users.aperson,usage:[5,6,3,2,1]}],b}]),app.factory("dataUsers",function(){var a={};return a.users={aperson:{name:"A. Person",username:"aperson",components:[]}},a}),app.factory("mixUserComponents",["dataUsers","dataComponents",function(a,b){angular.forEach(b.components,function(a){a.creator.components.push(a)})}]);